= Deploying a smart contract

== Prerequisites

=== Ensure Starkli and Scarb are installed correctly
Ensure that the below commands are working properly on your system.

[source, bash]
----
starkli --version
scarb --version
----

If either of the above commands fail, please visit xref:environment-setup.adoc[Setting up your environment].

== Introduction

Deploying a smart contract in Starknet requires two steps:

* xref:declare-a-smart-contract.adoc[Declaring] the class of your contract, i.e. sending your contractâ€™s code to the network.

* Deploying a contract, i.e. creating an instance of the code you previously declared.

image::deployment-process.png[]

For more details on the declaration and deployment processes, see xref:contract-classes.adoc[Contract classes and instances].


== Deploying a smart contract
Deploying a smart contract involves instantiating it on Starknet. The deployment command requires the class hash of the smart contract and any arguments expected by the constructor.

For our example, the constructor expects an address to assign as the owner:

[source,bash]
----
starkli deploy \
    <CLASS_HASH> \
    <CONSTRUCTOR_INPUTS> \
    --network=sepolia
----

With the class hash and constructor inputs, the command looks like this:

[source,bash]
----
starkli deploy \
    0x00e68b4b07aeecc72f768b1c086d9b0aadce131a40a1067ffb92d0b480cf325d \
    0x02cdAb749380950e7a7c0deFf5ea8eDD716fEb3a2952aDd4E5659655077B8510 \
    --network=sepolia
----


== Expected result

After running the command and adding your password, you will see an output similar to this:

[source,bash]
----
Deploying class 0x00e68b4b07aeecc72f768b1c086d9b0aadce131a40a1067ffb92d0b480cf325d with salt 0x04bc3fc2284c8e41fb3d2a37bb0354fd0506131cc77a8c91e4e67ce3aed1d19e...
The contract will be deployed at address 0x014825acb37c36563d3b96c450afe363d2fdfa3cfbd618b323f95b68b55ebf7e
Contract deployment transaction: 0x0086972e7463d5673d8b553ae521ec2df974a97c2ce6aafc1d1c20d22c6b96c6
Contract deployed: 0x014825acb37c36563d3b96c450afe363d2fdfa3cfbd618b323f95b68b55ebf7e
----

The smart contract has now been deployed to Starknet.

=== Verifying the Deployment

To verify your contract deployment:

* Using Starkli:
You can use the following command to retrieve the class hash of your deployed contract:

[source,bash]
----
starkli class-hash-at <CONTRACT_ADDRESS> --network=sepolia
----

* Using a Block Explorer:

You can use block explorers like https://voyager.online/ or https://starkscan.co/ to search for the contract address.

[IMPORTANT]
====
Remember to select the Sepolia testnet in these block explorers when searching for your deployed contract.
====

Your smart contract is now live on the Starknet network, ready to interact with users and other contracts.

=== Potential deployment errors

When using Starknet SDKs like starknet.js, starknet.py, or starknet-rs, you might encounter the following error during deployment:

[source,bash]
----
Requested ContractAddress(PatriciaKey(<CONTRACT_ADDRESS>)) is unavailable for deployment.
----

This error means that a contract is already deployed at the computed address. The address is a function of the class_hash, deployer_address (if specified), salt, and constructor_calldata_hash.

To resolve this issue, make sure to provide a different salt value. This ensures you're not attempting to override an already deployed contract.
